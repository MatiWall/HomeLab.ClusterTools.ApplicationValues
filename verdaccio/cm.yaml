apiVersion: v1
kind: ConfigMap
metadata:
  name: verdaccio-config
  namespace: verdaccio
data:
  config.yaml: |
    storage: /verdaccio/storage
    web:
      title: Verdaccio
    
    auth:
      htpasswd:
        file: ./htpasswd


    uplinks:
      npmjs:
        url: https://registry.npmjs.org/
    # a list of other known repositories we can talk to

    packages:
      '@*/*':
        # scoped packages
        access: $all
        publish: $authenticated
        unpublish: $authenticated
        proxy: npmjs

      '**':
        access: $all
        publish: $authenticated
        unpublish: $authenticated
        proxy: npmjs
    server:
      keepAliveTimeout: 60

    middlewares:
      audit:
        enabled: true
    logs:
      - { type: stdout, format: pretty, level: http }