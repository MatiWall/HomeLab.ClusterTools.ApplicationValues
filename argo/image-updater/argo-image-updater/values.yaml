

deployment:
  nameOverride: argo-image-updater
  fullnameOverride: argo-image-updater
  #registries:
  #  - name: Docker Registry MW Local
  #    prefix: docker-registry.mw.local
  #    api_url: https://docker-registry.mw.local
  #    default: true
  #    insecure: true
  initContainers: 
    - name: add-trusted-ca-certificates
      image: alpine:3.8
      command: [sh, -c]
      securityContext:
        runAsUser: 0
        runAsNonRoot: false
      args: 
        - | 
          apk add --upgrade ca-certificates && \
          update-ca-certificates && cp -r /etc/ssl/certs/* /artifact/
      volumeMounts:
        - mountPath: /usr/local/share/ca-certificates/homelab-root-ca.crt # aparently need to change extension
          subPath: homelab-root-ca.crt
          name: trusted-ca-certificates
          readOnly: true
        - mountPath: /artifact
          name: tmp
          readOnly: false
  volumeMounts:
      - name: tmp
        mountPath: /etc/ssl/certs
        readOnly: false
  volumes:
    - name: trusted-ca-certificates
      configMap:
        name: homelab-root-ca-bundle
        items:
          - key: root-certs.pem
            path: homelab-root-ca.crt
    - name: tmp
      emptyDir: {}
  extraObjects:
    - apiVersion: bitnami.com/v1alpha1
      kind: SealedSecret
      metadata:
        name: github-ssh-key
        namespace: argocd
      spec:
        encryptedData:
          ssh-privatekey: AgBQ/y0SePVdhp9eF6KF0bwuAOedKqRKri3Dupu+qJPWcvKKz2TfFuM1syAo2mtmLXiAAAu426RXQtTJXliRWiiGGQ9WE3Euwd7dh4mHEmgI7eZR9okBj2675L59DY6E2YdoR/MgpOokh5P/mJgy7FGIbZf2MtsLBzP4adp/jDUB07tGEnw4V0q3/EmcoAZH7TA5nztR23yVC965+wYJzw4v7YSrcV7/Lcxz6OkvLuj5YdSYrL2/tNJW/oAaOVpsOp3p95qorag5NhPVcnL/YCxShI9tUjflGRg6GXGQbL7Bh0j3iMTc/w5fupar22wLdpLZvTI0f2jAoP6OkGe5iDJu5+QhVzFLWv8z0/GQeoskSqLy35H+cA8FSQy74rW3DjV5FtIe5txTwmSpEod44i1q4J9n2O+Ua5I79P7eVQqVoxktn6WcM2EoUTxVU6QVazpw1cORIed0qvBf7LVtbHhaPorxZMGJS58a9fClYwCRx8B7uOq4g4dV3wxD67y08GTzyRhn0tg7Sonyiud0blqCxm3voDhkZlX/HAcetmUpy6kpjTdXULNUxc31InJ3Fjx6pGwqHD6pXz02rQWjg85zb9s2mx5w4oi2lSKwyIf+jswXOput7b/rC5vM4M1cYsGZVJ406RAGHGlTuKvapHRfC2kGOp5Lv00a6wlAmsT1bgQr5M5RtL+KHt1y3vmgAn//tv6UpgFqmDXf4uGVswF/CSMbfwREAJ32oBRGk5IEXYL3p8ZAejle9dLKP9V02pCLkPiEOga8rC7nAx0uesO+0agLZMfEk6CyfqQroyHg18Wuo5hKE7/4dOG0jVO7gPnSPxisJGsBQ5+82vrnty8xnCdi5zx/b+bbmDqI0vOlUJ/Md/yMIqwvzxzE40AR+cDPIz9BlwMYLehbVNglhgl1vSGR14lilDj7Qod1q59uIPVnscdpIfGYTkJ+6V/7f2fRPJpelIB7Zroom59QItPwzn5aLJRhL0i/sBel8mSc4lgOi53qrMl+XYR+xd8Mn7YsKaXicBfia/Fza6Sjsz5ebak6DNbmod0jQc+lvzOdeKFEaSxWMiuozmRlkVwzOeb9jZHnCoZW7clGYLgmvu+ufnesHC6F+ByC5fOLEfZnQIuZ2nAxlTVTufwu8F4cjO9BeE18kBfe4nKFbuuwn0D2kD0j8Y6TW3g6vbaJDq8bDUXI3Vl4Otwk40wGj3t0yKmiAlg=
        template:
          metadata:
            name: github-ssh-key
            namespace: argocd
          type: Opaque